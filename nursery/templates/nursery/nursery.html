{% extends 'base.html' %}
{% load static %}

{% block title %}
Nursery
{% endblock %}

{% block content %}

<section class="grid sm:grid-flow-col md:grid-flow-row gap-4 mb-4" id="nursery-table">
    {% if user.is_authenticated %} <div class="column mx-auto"><a href="{% url 'plant-fableseed' %}" class="btn hover:bg-secondary hover:text-secondary-content">Plant a
            Seed</a></div> {% endif %}
    <div class="w-full h-full overflow-auto bg-base-100 rounded-xl bg-clip-border drop-shadow-secondary-content drop-shadow-md"
        id="nursery">
        <table id="fableseed-list" class="table-fixed w-full min-w-max text-left">
            <thead>
                <tr>
                    <th class="w-17 icon border-b border-r border-secondary bg-base-300"></th>
                    <th class="p-2 border-b md:border-r border-secondary bg-base-300">Seed Title</th>
                    <th class="p-2 border-b border-r border-secondary bg-base-300 hidden sm:table-cell">Author</th>
                    <th class="p-2 border-b border-r border-secondary bg-base-300 hidden sm:table-cell">Date created
                    </th>
                    <th class="p-2 border-b border-secondary bg-base-300 hidden sm:table-cell">Last Edited</th>
                </tr>
            </thead>
            <tbody>
                {% for fableseed in page_obj %}
                <tr class="clickable hover:bg-secondary hover:text-secondary-content hover:font-bold cursor-pointer"
                    data-href="{% url 'fableseed-view' fableseed.seed %}">
                    <td class="p-2 border-t border-r border-secondary">{{ fableseed.flower_type.flower_image_url}}</td>
                    <td class="p-4 border-t md:border-r border-secondary">
                        <div>{{ fableseed.title_trunc }}</div>
                    </td>
                    <td class="p-4 border-t border-r border-secondary hidden sm:table-cell">{{ fableseed.author.get_display_name }}</td>
                    <td class="p-4 border-t border-r border-secondary hidden sm:table-cell">{{ fableseed.created_on }}
                    </td>
                    <td class="p-4 border-t border-secondary hidden sm:table-cell">
                        {% if fableseed.latest_branch %}
                        <p>by {{ fableseed.latest_branch.author.get_display_name }}</p>
                        <p class="text-sm">{{ fableseed.latest_branch.created_on }}</p>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>

        </table>
    </div>
    <div class="pagination">
        <span class="step-links">
            {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
            {% endif %}

            <span class="current">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
            </span>

            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
            {% endif %}
        </span>
    </div>
</section>

{% endblock content %}