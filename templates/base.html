{% load static %}

{% url 'home' as home_url %}
{% url 'nursery' as nursery_url %}
{% url 'about' as about_url %}
{% url 'about' as about_url %}
{% url 'account_signup' as signup_url %}
{% url 'account_login' as login_url %}
{% url 'mygarden' as garden_url %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Welcome to Fableseed, a collaborative storytelling platform where stories grow like plants and words breathe life into a blooming world.">
  <meta name="author" content="Lucy Sears">
  <meta name="keywords" content="storytelling, stories, collaborative, apocalypse, garden, flowers, ">
  <title>{% block title %}
    Fableseed
    {% endblock %}</title>
  <link href="{% static 'css/main.css' %}" rel="stylesheet">
  <link href="{% static 'css/custom.css' %}" rel="stylesheet">
</head>

<body
  class="min-h-screen min-w-full max-w-full flex flex-col {% if request.path == home_url %}bg-base-300 {% else%}bg-primary{% endif %} md:bg-[url(/static/images/bg1.avif)] bg-contain lg:bg-cover lg:bg-center">
  <header class="w-full">
    <div class="navbar bg-base-200 shadow border-b border-base-100">
      <div class="navbar-start flex-3 md:flex-2 lg:flex-1 gap-2 md:gap-3">
        <div class="dropdown pr-0">
          <div tabindex="0" role="button" class="btn btn-ghost lg:hidden">
            <svg xmlns="https://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" />
            </svg>
          </div>
          <ul tabindex="0" class="menu menu-md dropdown-content bg-base-200 rounded-box z-1 mt-3 w-52 p-2 shadow">
            <li class="{% if request.path == home_url %} active" aria-current="page {% endif %}"><a href="{% url 'home' %}">Home</a></li>
            <li class="{% if request.path == nursery_url %} active" aria-current="page {% endif %}"><a href="{% url 'nursery' %}">Nursery</a></li>
            <li class="{% if request.path == about_url %} active" aria-current="page {% endif %}"><a href="">About</a></li>
            {% if user.is_authenticated %}
            <li class="{% if request.path == garden_url %} active" aria-current="page {% endif %}"><a href="{% url 'mygarden' id=user.id %}">My Garden</a></li>
            <li class="{% if request.path == logout_url %} active" aria-current="page {% endif %}"><a href="{% url 'account_logout' %}">Logout</a></li>
            {% else %}
            <li class="{% if request.path == signup_url %} active" aria-current="page {% endif %}"><a href="{% url 'account_signup' %}">Sign Up</a></li>
            <li class="{% if request.path == login_url %} active" aria-current="page {% endif %}"><a href="{% url 'account_login' %}">Login</a></li>
            {% endif %}
          </ul>
        </div>

        <div class="flex items-center gap-2 justify-center" id="logo-container">
          <picture class="order-2 lg:order-1"> <!-- Mobile Image -->
            <source media="(max-width: 767px)"
              srcset="https://res.cloudinary.com/dppks2exv/image/upload/c_pad,w_40,h_40/v1756200831/logo_75x75_fhz04t.avif">
            <!-- Desktop Image -->
            <source media="(min-width: 768px)"
              srcset="https://res.cloudinary.com/dppks2exv/image/upload/c_pad,w_60,h_60/v1756200831/logo_75x75_fhz04t.avif">
            <!-- Fallback Image --> <img aria-hidden="true" decoding="async" src="../static/images/logo_75x75.avif"
              alt="Fableseed logo." min-width="40px">
          </picture>
          <h1 class="mt-3 pr-5 lg:order-1"><a class="font-bold text-5xl md:text-6xl lg:text-5xl xl:text-6xl font-great-vibes hover:text-base-100"
              href="{% url 'nursery' %}">Fableseed</a></h1>
        </div>


      </div>
      <div class="navbar-center flex-1 justify-center hidden lg:flex-2 lg:flex">
        <ul class="menu menu-horizontal gap-4 xl:gap-6">
          <li><a class="btn lg:btn-sm xl:btn-md bg-primary hover:bg-base-100 {% if request.path == home_url %} active" aria-current="page {% endif %}" href="{% url 'home' %}">Home</a></li>
          <li><a class="btn lg:btn-sm xl:btn-md bg-primary hover:bg-base-100 {% if request.path == nursery_url %}active" aria-current="page {% endif %}" href="{% url 'nursery' %}">Nursery</a></li>
          <li><a class="btn lg:btn-sm xl:btn-md bg-primary hover:bg-base-100 {% if request.path == about_url %}active" aria-current="page {% endif %}">About</a></li>
          {% if user.is_authenticated %}
          <li><a class="btn lg:btn-sm xl:btn-md bg-primary hover:bg-base-100 {% if request.path == garden_url %}active" aria-current="page {% endif %}" href="{% url 'mygarden' id=user.id %}">My Garden</a></li>
          <li><a class="btn lg:btn-sm xl:btn-md bg-primary hover:bg-base-100 {% if request.path == logout_url %}active" aria-current="page {% endif %}" href="{% url 'account_logout' %}">Logout</a></li>
          {% else %}
          <li><a class="btn lg:btn-sm xl:btn-md bg-primary hover:bg-base-100 {% if request.path == signup_url %}active" aria-current="page {% endif %}" href="{% url 'account_signup' %}">Sign Up</a></li>
          <li><a class="btn lg:btn-sm xl:btn-md bg-primary hover:bg-base-100 {% if request.path == login_url %}active" aria-current="page {% endif %}" href="{% url 'account_login' %}">Login</a></li>
          {% endif %}
        </ul>
      </div>
      <div class="navbar-end flex-1 justify-end hidden md:flex pr-3 md:text-xs xl:text-md">
        {% if user.is_authenticated %}
        <p>You are currently logged in as {{user.get_display_name}} </p>
        {% else %}
        <p>You are currently logged out</p>
        {% endif %}
      </div>
    </div>
  </header>
  <main class="container mx-auto mt-4 flex-grow px-4 flex flex-col justify-center">
    {% if messages %}
    {% for message in messages %}
    <div class="text-center">
      <div class="
      {% if 'success' in message.tags %}alert-success{% endif %}
      {% if 'error' in message.tags %}alert-error{% endif %}
      message alert max-sm:alert-vertical text-xs font-bold inline-block mx-auto mb-3
      " data-message="{{ message }}" role="alert" aria-live="assertive" aria-atomic="true">
        {{ message }}
      </div>
    </div>
    {% endfor %}
    {% endif %}

    {% block content %}
    {% endblock %}
  </main>
  <footer class="bg-base-200 mt-4 py-4 border-t border-base-100"> {% if user.is_authenticated %}
    <p class="text-center text-sm md:text-md">You are currently logged in as {{user.get_display_name}} </p>
    {% else %}
    <p class="p-2 text-center">You are currently logged out </p>
    {% endif %}
  </footer>
  {% block extra_js %}
  {% endblock %}
  <script src="{% static 'js/script.js' %}"></script>
</body>

</html>